/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
var i;
var data = {  
   "last_five_tournaments":[  
      {  
         "finPos":{  
            "playOffFlg":"",
            "value":"T42",
            "finCode":"T"
         },
         "scr":{  
            "relToPar":"-4",
            "totalScr":"276",
            "rounds":[  
               {  
                  "rndNum":"Round 1",
                  "posInField":"T1",
                  "rndScr":"63"
               },
               {  
                  "rndNum":"Round 2",
                  "posInField":"T25",
                  "rndScr":"73"
               },
               {  
                  "rndNum":"Round 3",
                  "posInField":"T46",
                  "rndScr":"71"
               },
               {  
                  "rndNum":"Round 4",
                  "posInField":"T42",
                  "rndScr":"69"
               }
            ]
         },
         "endDate":"6/24/18",
         "schwabCupPoints":"",
         "ssFinPos":"999",
         "offMoney":"$24,500.00",
         "fedexEvtPts":"12",
         "trn":{  
            "trnName":"Travelers Championship",
            "permNum":"034",
            "trnNum":"370",
            "officialFlg":"Y"
         },
         "ssFinPosFinCode":"",
         "fedexRnkReg":"37",
         "ssMoney":"",
         "fedexRnkPO":"",
         "schwabCupRank":""
      },
      {  
         "finPos":{  
            "playOffFlg":"",
            "value":"CUT",
            "finCode":"C"
         },
         "scr":{  
            "relToPar":"+9",
            "totalScr":"149",
            "rounds":[  
               {  
                  "rndNum":"Round 1",
                  "posInField":"T101",
                  "rndScr":"78"
               },
               {  
                  "rndNum":"Round 2",
                  "posInField":"T68",
                  "rndScr":"71"
               }
            ]
         },
         "endDate":"6/17/18",
         "schwabCupPoints":"",
         "ssFinPos":"999",
         "offMoney":"",
         "fedexEvtPts":"",
         "trn":{  
            "trnName":"U.S. Open",
            "permNum":"026",
            "trnNum":"360",
            "officialFlg":"Y"
         },
         "ssFinPosFinCode":"",
         "fedexRnkReg":"38",
         "ssMoney":"",
         "fedexRnkPO":"",
         "schwabCupRank":""
      },
      {  
         "finPos":{  
            "playOffFlg":"",
            "value":"CUT",
            "finCode":"C"
         },
         "scr":{  
            "relToPar":"+3",
            "totalScr":"147",
            "rounds":[  
               {  
                  "rndNum":"Round 1",
                  "posInField":"T85",
                  "rndScr":"75"
               },
               {  
                  "rndNum":"Round 2",
                  "posInField":"T94",
                  "rndScr":"72"
               }
            ]
         },
         "endDate":"6/03/18",
         "schwabCupPoints":"",
         "ssFinPos":"999",
         "offMoney":"",
         "fedexEvtPts":"",
         "trn":{  
            "trnName":"the Memorial Tournament presented by Nationwide",
            "permNum":"023",
            "trnNum":"340",
            "officialFlg":"Y"
         },
         "ssFinPosFinCode":"",
         "fedexRnkReg":"32",
         "ssMoney":"",
         "fedexRnkPO":"",
         "schwabCupRank":""
      },
      {  
         "finPos":{  
            "playOffFlg":"",
            "value":"T32",
            "finCode":"T"
         },
         "scr":{  
            "relToPar":"-5",
            "totalScr":"275",
            "rounds":[  
               {  
                  "rndNum":"Round 1",
                  "posInField":"T44",
                  "rndScr":"69"
               },
               {  
                  "rndNum":"Round 2",
                  "posInField":"T23",
                  "rndScr":"68"
               },
               {  
                  "rndNum":"Round 3",
                  "posInField":"T38",
                  "rndScr":"70"
               },
               {  
                  "rndNum":"Round 4",
                  "posInField":"T32",
                  "rndScr":"68"
               }
            ]
         },
         "endDate":"5/27/18",
         "schwabCupPoints":"",
         "ssFinPos":"999",
         "offMoney":"$36,068.00",
         "fedexEvtPts":"20",
         "trn":{  
            "trnName":"Fort Worth Invitational",
            "permNum":"021",
            "trnNum":"330",
            "officialFlg":"Y"
         },
         "ssFinPosFinCode":"",
         "fedexRnkReg":"30",
         "ssMoney":"",
         "fedexRnkPO":"",
         "schwabCupRank":""
      },
      {  
         "finPos":{  
            "playOffFlg":"",
            "value":"T21",
            "finCode":"T"
         },
         "scr":{  
            "relToPar":"-11",
            "totalScr":"273",
            "rounds":[  
               {  
                  "rndNum":"Round 1",
                  "posInField":"T57",
                  "rndScr":"69"
               },
               {  
                  "rndNum":"Round 2",
                  "posInField":"T20",
                  "rndScr":"66"
               },
               {  
                  "rndNum":"Round 3",
                  "posInField":"T29",
                  "rndScr":"71"
               },
               {  
                  "rndNum":"Round 4",
                  "posInField":"T21",
                  "rndScr":"67"
               }
            ]
         },
         "endDate":"5/20/18",
         "schwabCupPoints":"",
         "ssFinPos":"999",
         "offMoney":"$80,080.00",
         "fedexEvtPts":"39",
         "trn":{  
            "trnName":"AT&T Byron Nelson",
            "permNum":"019",
            "trnNum":"320",
            "officialFlg":"Y"
         },
         "ssFinPosFinCode":"",
         "fedexRnkReg":"31",
         "ssMoney":"",
         "fedexRnkPO":"",
         "schwabCupRank":""
      }
   ],
   "stats":[  
      {  
         "statID":"101",
         "additionals":[  
            {  
               "title":"Total Distance",
               "value":"29,787"
            },
            {  
               "title":"Total Drives",
               "value":"100"
            }
         ],
         "name":"Driving Distance",
         "rank":"76",
         "projRank":"",
         "value":"297.9"
      },
      {  
         "statID":"102",
         "additionals":[  
            {  
               "title":"Fairways Hit",
               "value":"439"
            },
            {  
               "title":"Possible Fairways",
               "value":"701"
            }
         ],
         "name":"Driving Accuracy Percentage",
         "rank":"87",
         "projRank":"",
         "value":"62.62%"
      },
      {  
         "statID":"103",
         "additionals":[  
            {  
               "title":"Greens Hit",
               "value":"645"
            },
            {  
               "title":"# Holes",
               "value":"900"
            }
         ],
         "name":"Greens in Regulation Percentage",
         "rank":"4",
         "projRank":"",
         "value":"71.67%"
      },
      {  
         "statID":"155",
         "additionals":[  
            {  
               "title":"# of Holes",
               "value":"936"
            },
            {  
               "title":"# of Eagles",
               "value":"6"
            }
         ],
         "name":"Eagles (Holes per)",
         "rank":"46",
         "projRank":"",
         "value":"156.0"
      },
      {  
         "statID":"156",
         "additionals":[  
            {  
               "title":"# of Birdies",
               "value":"219"
            },
            {  
               "title":"Total Rounds",
               "value":"52"
            }
         ],
         "name":"Birdie Average",
         "rank":"8",
         "projRank":"",
         "value":"4.21"
      },
      {  
         "statID":"120",
         "additionals":[  
            {  
               "title":"Total Strokes",
               "value":"3,619"
            },
            {  
               "title":"Total Adjustment",
               "value":"19.030"
            }
         ],
         "name":"Scoring Average",
         "rank":"19",
         "projRank":"",
         "value":"69.962"
      },
      {  
         "statID":"111",
         "additionals":[  
            {  
               "title":"# Saves",
               "value":"36"
            },
            {  
               "title":"# Bunkers",
               "value":"72"
            }
         ],
         "name":"Sand Save Percentage",
         "rank":"93",
         "projRank":"",
         "value":"50.00%"
      },
      {  
         "statID":"109",
         "additionals":[  
            {  
               "title":"",
               "value":""
            },
            {  
               "title":"YTD Victories",
               "value":""
            }
         ],
         "name":"Official Money",
         "rank":"40",
         "projRank":"",
         "value":"$2,080,394"
      },
      {  
         "statID":"186",
         "additionals":[  
            {  
               "title":"Total Points",
               "value":"342.01"
            },
            {  
               "title":"Points lost",
               "value":"-199.50"
            }
         ],
         "name":"Official World Golf Ranking",
         "rank":"6",
         "projRank":"",
         "value":"7.13"
      }
   ],
   "pga_id":34046,
   "name":"Jordan Spieth",
   "country_abr":"USA",
   "Weight":"185 lbs",
   "birthString":"July 27, 1993 in Dallas, Texas (Age: 24)",
   "height":"6\" 1'"
};
            // Get the modal
            var modal = document.getElementById('stats_modal');

            // Get the button that opens the modal
            var link = document.getElementById("link");

            // Get the <span> element that closes the modal
            var span = document.getElementsByClassName("close")[0];

            // When the user clicks the button, open the modal 
            link.onclick = function() {
                modal.style.display = "block";
                
                var news_button = document.getElementById("news_tab");
                var stats_button = document.getElementById("stats_tab");
                var news_tab = document.getElementById("newsfeed");
                var stats_tab = document.getElementById("stats_table");
                
                news_button.onclick = function() {
                   news_tab.style.display = "block";
                   stats_tab.style.display = "none";
                };
                stats_button.onclick = function() {
                   news_tab.style.display = "none";
                   stats_tab.style.display = "block";
                };
                
                function myFunction(x) {
                    if (x.matches) { // If media query matches
                        document.getElementById('playerphoto').setAttribute('align', 'center');
                    }
                    else {
                        document.getElementById('playerphoto').setAttribute('align', 'auto');
                    }
                }
                var x = window.matchMedia("(max-width: 767px)");
                myFunction(x); // Call listener function at run time
                x.addListener(myFunction); // Attach listener function on state changes


                var header = document.getElementById("player_name");
                header.innerHTML = "Jordan Spieth";
                var header = document.getElementById("mobile_playername");
                header.innerHTML = "Jordan Spieth";

                var player_pic = document.getElementById('headshot');
                player_pic.src = 'https://pga-tour-res.cloudinary.com/image/upload/c_fill,d_headshots_default.png,dpr_2.0,f_auto,g_face:center,h_160,q_auto,w_250/headshots_' + data.pga_id + '.png';
                var team_logo = document.getElementById('flag');
                team_logo.src = 'http://a.espncdn.com/golfonline/img/flags/' +data.country_abr+ '.jpg';
                //team_logo.src = 'http://a.espncdn.com/golfonline/img/flags/usa.jpg';

                var list_info = document.getElementById("country_list");
                list_info.innerHTML = 'Country: ' + data.country_abr;
                var list_info = document.getElementById("height_list");
                list_info.innerHTML = 'Height: ' + data.height + ' · Weight: ' + data.Weight;
                var list_info = document.getElementById("born_list");
                list_info.innerHTML = 'Born: ' + data.birthString;

                var table_info = document.getElementById("country_table");
                table_info.innerHTML = data.country_abr;
                var table_info = document.getElementById("height_table");
                table_info.innerHTML = data.height;
                var table_info = document.getElementById("weight_table");
                table_info.innerHTML = data.Weight;
                var table_info = document.getElementById("born_table");
                table_info.innerHTML = data.birthString;

            
                var season_stats = document.getElementById("season_stats");
                season_stats.innerHTML = "2018 PGA TOUR Season Stats";//data.year_stats.STAT_TYPE;

                var sst = document.getElementById("season_stats_table").rows[0].cells;
                sst[0].innerHTML = "RANK";
                sst[1].innerHTML = "WINS";
                sst[2].innerHTML = "T-10's";
                sst[3].innerHTML = "HOLES";
                sst[4].innerHTML = "EAG";
                sst[5].innerHTML = "BIR";
                sst[6].innerHTML = "AVG";
                var sst = document.getElementById("season_stats_table").rows[1].cells;
                sst[0].innerHTML = data.stats[8].rank;
                sst[1].innerHTML = data.stats.PPG;
                sst[2].innerHTML = data.stats.RPG;
                sst[3].innerHTML = data.stats[3].additionals[0].value;
                sst[4].innerHTML = data.stats[3].additionals[1].value;
                sst[5].innerHTML = data.stats[4].additionals[0].value;
                sst[6].innerHTML = data.stats[5].value;
            
                var prev_games = document.getElementById("prev_games");
                prev_games.innerHTML = "Last Five Tournaments";

                var pgt = document.getElementById("prev_games_table").rows[0].cells;
                pgt[0].innerHTML = "End Date";
                pgt[1].innerHTML = "Event";
                pgt[2].innerHTML = "POS";
                pgt[3].innerHTML = "R1";
                pgt[4].innerHTML = "R2";
                pgt[5].innerHTML = "R3";
                pgt[6].innerHTML = "R4";
                pgt[7].innerHTML = "TOT";                   
            
                for(var i = 1;i <= 5;i++){

                    var endDate = data.last_five_tournaments[i-1].endDate;
                    var event = data.last_five_tournaments[i-1].trn.trnName;
                    var pos = data.last_five_tournaments[i-1].finPos.value;
                    var total = data.last_five_tournaments[i-1].scr.totalScr + ' (' + data.last_five_tournaments[i-1].scr.relToPar + ')';
                    
                    var r1 = data.last_five_tournaments[i-1].scr.rounds;                  
                    if(r1.length < 1){
                        r1 = "0";
                    }
                    else {
                        r1 = data.last_five_tournaments[i-1].scr.rounds[0].rndScr;
                    }

                    var r2 = data.last_five_tournaments[i-1].scr.rounds;
                    if(r2.length < 2){
                        r2 = "0";
                    }
                    else {
                        r2 = data.last_five_tournaments[i-1].scr.rounds[1].rndScr;
                    }
                    
                    var r3 = data.last_five_tournaments[i-1].scr.rounds;
                    if(r3.length < 3){
                        r3 = "0";
                    }
                    else {
                        r3 = data.last_five_tournaments[i-1].scr.rounds[2].rndScr;
                    }
                    
                    var r4 = data.last_five_tournaments[i-1].scr.rounds;
                    if(r4.length < 4){
                        r4 = "0";
                    }
                    else {
                        r4 = data.last_five_tournaments[i-1].scr.rounds[3].rndScr;
                    }
                    
                    var pgt = document.getElementById("prev_games_table").rows[i].cells;
                    pgt[0].innerHTML = endDate;
                    pgt[1].innerHTML = event;
                    pgt[2].innerHTML = pos;
                    pgt[3].innerHTML = r1;                  
                    pgt[4].innerHTML = r2;
                    pgt[5].innerHTML = r3;
                    pgt[6].innerHTML = r4;
                    pgt[7].innerHTML = total;

                }
            };

            // When the user clicks on <span> (x), close the modal
            span.onclick = function() {
                modal.style.display = "none";
            };
            // When the user clicks anywhere outside of the modal, close it
            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            };


